<!--
	此示例下载自 https://echarts.apache.org/examples/zh/editor.html?c=line-race&code=CQOg5gpgLgFAUAAgQJQPKoCoH0AKBBDACQQGoEByAegBMBDKWy2gZ2ehvsYBsBLAMwgBaCAA8ADhADGDAHaSAnoIYAjLhBAArZgHsZ5ADSIEfAK5yoPXQhhYATrQDuAEU4BKBAG8jSW2Zv3nNwBuIwBfOFcQ03NLGQRfGX9HFwZ3LyRKSgQAN1pbBEltMyhbHghmBABeBABtcjwTZhLaXloDCgBhWhlaOnbyDoALHh7-jpNlNv0KADERrm7qfpn7OQh-gHEIWwBbbvl-gElJCAWZJenyQ_OeKYoAKVoxbv6AOW1bKEGEAGkPiDu5AAykUvr9_oDXhAHAgAFoAs4XCjvWwOWgHS44bSI_rIRrMW79DAmWwAawgGIoAFUZDwoBBqL8RmBqNodv0aXSGQggQx6cxyABdEJIQoyJoFIoyEplCrVGreWbzRYGRXkFbdE6qpBIchbXb7bU6q4nHGGHXIj5ojFqrFmtV41iE83Gzn0xk_Zms9lGYVGMUSugMNhQADqdMGcy49NsctqftFuglbFK5QAMjwJfKEwgpIM8lBmCATBYuCAAZJBjBCsVU8xptFpLFrDXpbZ5GlFbl8kGWNBDozquReyGsORSJLa_IRTqR9Bw18ozGi2JGlX0haEDxqAAuBBzqADl0Wvi2NkpPuH3cUA92RxGi3NcV8D47PcbzcIKDyCR78h8Hho22B9NzFACwHfRVP0WPcFU_T8PH3HgdggcVYj_ABNAFbHaMB6T3ABGABOABWAAGBBQmPeCkEQ6hkNQgldD_DopRKSlyEqcg91bdjKKgzdBQEpBwk_USdVCSJFRTWUMyaEBV2YdcBO_X8KF4GR1mopADwHPddOobSECU7QHCBeQdmUbE9z4Fo2CMnoUJ4tj2yM1DqDTWhlFOSCaJMhw9xKEwICMpAXwNKAYxsswmysGBnnsHZmE7GifGgEk4gS2gkpAXIuGCmoAGZBQnbiKAnLKcrygqyJzMSBKogSFm8rhPPkUFfPgnZtGyCBUF62wFjEP8lP4KAMPIBq3J2MR8wJZhOs_F9JEaEbtllSaxLcuRtGoCBFs3ERMOwkCLXkP9rkKFDTp1ZqfNqAYXI4y62XWQVQq3ekdlebL9ooLC8hupAoG0bELGGh6XuuoT6otSSZ3hoxtDECwrGqD8EG6ZD6FiJwSRx5iEAIsiSbI6iD1ggSMYtbc_1vAIgeMopbBOPc70CBgpoEkAeYPBdI0A5dFXexULCgNQDuB0QoAunaUIQbQ-AQfU9hkeRMfOBANTWYyRhOInSLIzaJOokGwZ4CHqYV2w9tsP9qogJxykkG6ZTASA7YoWgREzY2ROokQ8B9hbPBUn8_vISR6AgMAPhtT9HIgNNtCj1GZD_HZt2oNQ_co6j5CDzNJYQRPZau9ZFUai0wFKa8rdKMBBhlomABYyMr6iZPKPcu-YOSoDCGcdnkIYCxAENUBR2IYGRtOpNCIA
	⚠ 请注意，该图表不是 Apache ECharts 官方示例，而是由用户代码生成的。请注意鉴别其内容。
-->
<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  <script type="text/javascript" src="jquery.min.js"></script>
  <script type="text/javascript" src="echarts.js"></script>
  
  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/5.5.0/files/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts-gl/2/files/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts-stat/latest/files/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/4.9.0/files/map/js/china.js"></script>
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/4.9.0/files/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/5.5.0/files/dist/extension/bmap.min.js"></script>
  -->

  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var app = {};
    var ROOT_PATH = 'https://echarts.apache.org/examples';
    var option;

    $.get(
  ROOT_PATH + '/data/asset/data/life-expectancy-table.json',
  function (_rawData) {
    run(_rawData);
  }
);
function run(_rawData) {
  // var countries = ['Australia', 'Canada', 'China', 'Cuba', 'Finland', 'France', 'Germany', 'Iceland', 'India', 'Japan', 'North Korea', 'South Korea', 'New Zealand', 'Norway', 'Poland', 'Russia', 'Turkey', 'United Kingdom', 'United States'];
  const countries = [
    'Finland',
    'France',
    'Germany',
    'Iceland',
    'Norway',
    'Poland',
    'Russia',
    'United Kingdom'
  ];
  const datasetWithFilters = [];
  const seriesList = [];
  echarts.util.each(countries, function (country) {
    var datasetId = 'dataset_' + country;
    datasetWithFilters.push({
      id: datasetId,
      fromDatasetId: 'dataset_raw',
      transform: {
        type: 'filter',
        config: {
          and: [
            { dimension: 'Year', gte: 1950 },
            { dimension: 'Country', '=': country }
          ]
        }
      }
    });
    seriesList.push({
      type: 'line',
      datasetId: datasetId,
      showSymbol: false,
      name: country,
      endLabel: {
        show: true,
        formatter: function (params) {
          return params.value[3] + ': ' + params.value[0];
        }
      },
      labelLayout: {
        moveOverlap: 'shiftY'
      },
      emphasis: {
        focus: 'series'
      },
      encode: {
        x: 'Year',
        y: 'Income',
        label: ['Country', 'Income'],
        itemName: 'Year',
        tooltip: ['Income']
      }
    });
  });
  option = {
    animationDuration: 10000,
    dataset: [
      {
        id: 'dataset_raw',
        source: _rawData
      },
      ...datasetWithFilters
    ],
    title: {
      text: 'Income of Germany and France since 1950'
    },
    tooltip: {
      order: 'valueDesc',
      trigger: 'axis'
    },
    xAxis: {
      type: 'category',
      nameLocation: 'middle'
    },
    yAxis: {
      name: 'Income'
    },
    grid: {
      right: 140
    },
    series: seriesList
  };
  myChart.setOption(option);
}


    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>